<html><head><title>01a-1</title>
<script>
window.onload = function() {
    document.getElementById("audio.wav").play();
}
</script>
<style>
span {
	color: #0A0A0A;
}
h1.a, div.a {color: #7F0000;}
h1.b, div.b {color: #007F00;}
h1.c, div.c {color: #00007F;}
h1.d, div.d {color: #007F7F;}
h1.e, div.e {color: #7F007F;}
h1.f, div.f {color: #7F7F00;}
h1.g, div.g {color: #FF007F;}
h1.h, div.h {color: #7FFF00;}
h1.i, div.i {color: #007FFF;}
h1.j, div.j {color: #FF7F00;}
h1.k, div.k {color: #00FF7F;}
h1.l, div.l {color: #7F00FF;}
h1.m, div.m {color: #FF7F7F;}
h1.n, div.n {color: #FFFF7F;}
h1.o, div.o {color: #7F7FFF;}
h1.p, div.p {color: #FF7FFF;}
audio {
    filter: sepia(0%) saturate(70%) grayscale(1) contrast(99%) invert(100%);
    width: 100%;
    height: 30px;
}</style></head><body style='font-family: sans-serif; font-size: 2vw; font-weight: bold; text-align: left; width: 100%; margin: auto;'>
<link rel='icon' href='data:;base64,iVBORw0KGgo='>
<audio id='audio.wav' src='audio.wav' style='position: fixed; right: 0px; top: 0px;' controls></audio>
<pre style='white-space: pre-wrap; color: #FFF;'><h1 class="b" style='position: fixed; top:10%; right:0px;'>01a-1</h1><div class="b" style='position: fixed;top:30%;right:0px;'>nine inch nails|industrial rock</div>
<span id='1/0'>
</span><span id='1/1'>H</span><span id='1/2'>o</span><span id='1/3'>p</span><span id='1/4'>!</span><span id='1/5'> </span><span id='1/6'>I</span><span id='1/7'>'</span><span id='1/8'>m</span><span id='1/9'> </span><span id='1/10'>a</span><span id='1/11'> </span><span id='1/12'>M</span><span id='1/13'>a</span><span id='1/14'>n</span><span id='1/15'>!</span><span id='1/16'>
</span><span id='1/17'>H</span><span id='1/18'>o</span><span id='1/19'>p</span><span id='1/20'>!</span><span id='1/21'> </span><span id='1/22'>I</span><span id='1/23'>'</span><span id='1/24'>m</span><span id='1/25'> </span><span id='1/26'>a</span><span id='1/27'> </span><span id='1/28'>M</span><span id='1/29'>a</span><span id='1/30'>n</span><span id='1/31'>!</span><span id='1/32'>
</span><span id='1/33'>H</span><span id='1/34'>o</span><span id='1/35'>p</span><span id='1/36'>!</span><span id='1/37'> </span><span id='1/38'>I</span><span id='1/39'>'</span><span id='1/40'>m</span><span id='1/41'> </span><span id='1/42'>a</span><span id='1/43'> </span><span id='1/44'>M</span><span id='1/45'>a</span><span id='1/46'>n</span><span id='1/47'>!</span><span id='1/48'></span></pre>
<script>
            async function fetchAsync (url) {
                let response = await fetch(url);
                let data = await response.json();
                return data;
            }
    
            var audio = document.getElementById('audio.wav');
            audio.onplay = function () {
                track = '1'
                fetchAsync('align.json')
                .then(data => animateLyrics(data, track, this))
                .catch(reason => console.log(reason.message))
            };
            audio.onended = function() {
                window.location.href = "../../01a/item_2/index.html";
            }; 
    
            function animateLyrics(data, track, audio) {
                var animate = setInterval(function () {
                    var time = Math.floor(audio.currentTime*1722/audio.duration);
                    if (!(time == 0 || time == 1722)) {
                        console.log(time);
                        changeColor(data, track, audio, time);
                    }
                    if (audio.paused) {
                        clearInterval(animate);
                    }
                }, 50);
            }
    
            function changeColor(data, track, audio, time) {
                colors = data[time]
                for (i = 0; i < colors.length; i++){
                    character = document.getElementById(track + '/' + i.toString());
                    c1 = Math.min(15 + 5*colors[i], 127).toString();
                    c2 = Math.min(40 + 5*colors[i], 255).toString();
                    rc=5;
                    gc=c1;
                    bc=5;
                    character.style.color = 'rgb(' + rc + ',' + gc + ',' + bc + ')';
                }
            }
            </script>
</body></html>
